!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("trafficControl",n):t.trafficControl=n()}(this,function(){"use strict";function t(t,n){return n={exports:{}},t(n,n.exports),n.exports}function n(t){return new jt(t)}var e={};e["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},e.classCallCheck=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},e.createClass=function(){function t(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(n,e,o){return e&&t(n.prototype,e),o&&t(n,o),n}}();var o=t(function(t){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)}),i=o&&"object"==typeof o&&"default"in o?o["default"]:o,a=t(function(t){t.exports=function(t){try{return!!t()}catch(n){return!0}}}),r=a&&"object"==typeof a&&"default"in a?a["default"]:a,c=t(function(t){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}}),s=c&&"object"==typeof c&&"default"in c?c["default"]:c,f=t(function(t){var n=s;t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}}),l=f&&"object"==typeof f&&"default"in f?f["default"]:f,u=t(function(t){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}}),d=u&&"object"==typeof u&&"default"in u?u["default"]:u,p=t(function(t){var n=d;t.exports=function(t){return Object(n(t))}}),y=p&&"object"==typeof p&&"default"in p?p["default"]:p,m=t(function(t,n){n.f={}.propertyIsEnumerable}),b=m&&"object"==typeof m&&"default"in m?m["default"]:m,v=t(function(t,n){n.f=Object.getOwnPropertySymbols}),h=v&&"object"==typeof v&&"default"in v?v["default"]:v,g=t(function(t){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")}),x=g&&"object"==typeof g&&"default"in g?g["default"]:g,j=t(function(t){var n=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+e).toString(36))}}),w=j&&"object"==typeof j&&"default"in j?j["default"]:j,E=t(function(t){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)}),k=E&&"object"==typeof E&&"default"in E?E["default"]:E,O=t(function(t){var n=k,e="__core-js_shared__",o=n[e]||(n[e]={});t.exports=function(t){return o[t]||(o[t]={})}}),C=O&&"object"==typeof O&&"default"in O?O["default"]:O,S=t(function(t){var n=C("keys"),e=w;t.exports=function(t){return n[t]||(n[t]=e(t))}}),z=S&&"object"==typeof S&&"default"in S?S["default"]:S,M=t(function(t){var n=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:n)(t)}}),_=M&&"object"==typeof M&&"default"in M?M["default"]:M,L=t(function(t){var n=_,e=Math.max,o=Math.min;t.exports=function(t,i){return t=n(t),0>t?e(t+i,0):o(t,i)}}),B=L&&"object"==typeof L&&"default"in L?L["default"]:L,A=t(function(t){var n=_,e=Math.min;t.exports=function(t){return t>0?e(n(t),9007199254740991):0}}),T=A&&"object"==typeof A&&"default"in A?A["default"]:A,I=t(function(t){var n=l,e=d;t.exports=function(t){return n(e(t))}}),N=I&&"object"==typeof I&&"default"in I?I["default"]:I,P=t(function(t){var n=N,e=T,o=B;t.exports=function(t){return function(i,a,r){var c,s=n(i),f=e(s.length),l=o(r,f);if(t&&a!=a){for(;f>l;)if(c=s[l++],c!=c)return!0}else for(;f>l;l++)if((t||l in s)&&s[l]===a)return t||l||0;return!t&&-1}}}),F=P&&"object"==typeof P&&"default"in P?P["default"]:P,X=t(function(t){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}}),D=X&&"object"==typeof X&&"default"in X?X["default"]:X,R=t(function(t){var n=D,e=N,o=F(!1),i=z("IE_PROTO");t.exports=function(t,a){var r,c=e(t),s=0,f=[];for(r in c)r!=i&&n(c,r)&&f.push(r);for(;a.length>s;)n(c,r=a[s++])&&(~o(f,r)||f.push(r));return f}}),Y=R&&"object"==typeof R&&"default"in R?R["default"]:R,G=t(function(t){var n=Y,e=x;t.exports=Object.keys||function(t){return n(t,e)}}),W=G&&"object"==typeof G&&"default"in G?G["default"]:G,H=t(function(t){var n=W,e=h,o=b,i=y,a=l,c=Object.assign;t.exports=!c||r(function(){var t={},n={},e=Symbol(),o="abcdefghijklmnopqrst";return t[e]=7,o.split("").forEach(function(t){n[t]=t}),7!=c({},t)[e]||Object.keys(c({},n)).join("")!=o})?function(t,r){for(var c=i(t),s=arguments.length,f=1,l=e.f,u=o.f;s>f;)for(var d,p=a(arguments[f++]),y=l?n(p).concat(l(p)):n(p),m=y.length,b=0;m>b;)u.call(p,d=y[b++])&&(c[d]=p[d]);return c}:c}),q=H&&"object"==typeof H&&"default"in H?H["default"]:H,U=t(function(t){t.exports=!r(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})}),J=U&&"object"==typeof U&&"default"in U?U["default"]:U,K=t(function(t){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}}),Q=K&&"object"==typeof K&&"default"in K?K["default"]:K,V=t(function(t){t.exports=function(t){return"object"===("undefined"==typeof t?"undefined":e["typeof"](t))?null!==t:"function"==typeof t}}),Z=V&&"object"==typeof V&&"default"in V?V["default"]:V,$=t(function(t){var n=Z;t.exports=function(t,e){if(!n(t))return t;var o,i;if(e&&"function"==typeof(o=t.toString)&&!n(i=o.call(t)))return i;if("function"==typeof(o=t.valueOf)&&!n(i=o.call(t)))return i;if(!e&&"function"==typeof(o=t.toString)&&!n(i=o.call(t)))return i;throw TypeError("Can't convert object to primitive value")}}),tt=$&&"object"==typeof $&&"default"in $?$["default"]:$,nt=t(function(t){var n=Z,e=k.document,o=n(e)&&n(e.createElement);t.exports=function(t){return o?e.createElement(t):{}}}),et=nt&&"object"==typeof nt&&"default"in nt?nt["default"]:nt,ot=t(function(t){t.exports=!J&&!r(function(){return 7!=Object.defineProperty(et("div"),"a",{get:function(){return 7}}).a})}),it=ot&&"object"==typeof ot&&"default"in ot?ot["default"]:ot,at=t(function(t){var n=Z;t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}}),rt=at&&"object"==typeof at&&"default"in at?at["default"]:at,ct=t(function(t,n){var e=rt,o=it,i=tt,a=Object.defineProperty;n.f=J?Object.defineProperty:function(t,n,r){if(e(t),n=i(n,!0),e(r),o)try{return a(t,n,r)}catch(c){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}}),st=ct&&"object"==typeof ct&&"default"in ct?ct["default"]:ct,ft=t(function(t){var n=st,e=Q;t.exports=J?function(t,o,i){return n.f(t,o,e(1,i))}:function(t,n,e){return t[n]=e,t}}),lt=ft&&"object"==typeof ft&&"default"in ft?ft["default"]:ft,ut=t(function(t){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}}),dt=ut&&"object"==typeof ut&&"default"in ut?ut["default"]:ut,pt=t(function(t){var n=dt;t.exports=function(t,e,o){if(n(t),void 0===e)return t;switch(o){case 1:return function(n){return t.call(e,n)};case 2:return function(n,o){return t.call(e,n,o)};case 3:return function(n,o,i){return t.call(e,n,o,i)}}return function(){return t.apply(e,arguments)}}}),yt=pt&&"object"==typeof pt&&"default"in pt?pt["default"]:pt,mt=t(function(t,n){var e=k,o=i,a=yt,r=lt,c="prototype",s=function f(t,n,i){var s,l,u,d=t&f.F,p=t&f.G,y=t&f.S,m=t&f.P,b=t&f.B,v=t&f.W,h=p?o:o[n]||(o[n]={}),g=h[c],x=p?e:y?e[n]:(e[n]||{})[c];p&&(i=n);for(s in i)l=!d&&x&&void 0!==x[s],l&&s in h||(u=l?x[s]:i[s],h[s]=p&&"function"!=typeof x[s]?i[s]:b&&l?a(u,e):v&&x[s]==u?function(t){var n=function(n,e,o){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,o)}return t.apply(this,arguments)};return n[c]=t[c],n}(u):m&&"function"==typeof u?a(Function.call,u):u,m&&((h.virtual||(h.virtual={}))[s]=u,t&f.R&&g&&!g[s]&&r(g,s,u)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s}),bt=mt&&"object"==typeof mt&&"default"in mt?mt["default"]:mt,vt=(t(function(t){var n=bt;n(n.S+n.F,"Object",{assign:q})}),t(function(t){t.exports=i.Object.assign})),ht=vt&&"object"==typeof vt&&"default"in vt?vt["default"]:vt,gt='<div class="tc-bar">\n  <div class="tc-message">\n    <div class="tc-container">\n      <div class="tc-message--text tc-message--loading">\n        Loading...\n      </div>\n      <div class="tc-message--text tc-message--synchronized">\n        You are viewing the staging site.\n        Everything is in sync, production is even with staging. ðŸ‘Œ\n      </div>\n      <div class="tc-message--text tc-message--ahead"></div>\n      <div class="tc-message--text tc-message--diverged"></div>\n      <div class="tc-message--text tc-message--unauthorized">\n        You are viewing the staging site,\n        but you cannot deploy or view changes\n        until you authorize read/write access\n        to your Github repository.\n      </div>\n    </div>\n  </div>\n  <div class="tc-action">\n    <div class="tc-container">\n      <button\n        class="tc-action--button tc-action--deploy"\n        aria-label="Perform a deployment to the production branch."\n      >Deploy</button>\n      <button\n        class="tc-action--button tc-action--authorize"\n        aria-label="Authorize traffic-control to access your Github account."\n      >Authorize</button>\n      <button\n        class="tc-action--button tc-action--info"\n        aria-label="Find out more information."\n      >How?</button>\n    </div>\n  </div>\n  <div class="tc-close">\n    <div class="tc-container">\n      <button\n        class="tc-close--button"\n        aria-label="Close traffic-control deployment user interface."\n      >&times;</button>\n    </div>\n  </div>\n</div>\n',xt="/*\n  Note: there is a lot of repetition going on in this CSS.\n  This is intentional, in order to keep specificity low\n  enough that custom styles are easier to implement.\n */\n\ntraffic-control,\ntraffic-control *,\ntraffic-control *:before,\ntraffic-control *:after {\n  box-sizing: border-box;\n}\n\ntraffic-control {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  z-index: 10000;\n}\n\ntraffic-control .tc-bar {\n  display: none;\n  width: 100%;\n  height: 100%;\n  table-layout: fixed;\n  font-family: sans-serif;\n  background: #fff;\n  color: #000;\n  transition: all .2s ease;\n}\n\ntraffic-control.is-loading .tc-bar {\n  background: #eee;\n  color: #ccc;\n}\n\ntraffic-control .tc-bar.is-entering {\n  animation: slideInDown .6s ease both;\n}\n\ntraffic-control .tc-message {\n  display: table-cell;\n  vertical-align: middle;\n  height: 100%;\n}\n\ntraffic-control .tc-action {\n  display: table-cell;\n  vertical-align: middle;\n  height: 100%;\n  width: 100px;\n}\n\ntraffic-control .tc-close {\n  display: table-cell;\n  vertical-align: middle;\n  height: 100%;\n  width: 60px;\n  border-left: 1px solid #eee;\n  transition: all .2s ease;\n}\n\ntraffic-control.is-loading .tc-close {\n  border-color: #ccc;\n}\n\ntraffic-control .tc-message--text {\n  font-size: 14px;\n  position: relative;\n  padding: 16px;\n}\n\ntraffic-control .tc-message--loading {\n  display: none;\n  opacity: 0;\n}\n\ntraffic-control .tc-message--loading.is-entering {\n  animation: bounceFadeInLeft .6s cubic-bezier(0.19, 1, 0.22, 1) both;\n  animation-delay: .3s;\n}\n\ntraffic-control .tc-message--synchronized {\n  display: none;\n}\n\ntraffic-control .tc-message--diverged {\n  display: none;\n}\n\ntraffic-control .tc-message--unauthorized {\n  display: none;\n}\n\ntraffic-control .tc-message--ahead {\n  display: none;\n}\n\ntraffic-control .tc-action--deploy {\n  display: none;\n}\n\ntraffic-control .tc-action--info {\n  display: none;\n}\n\ntraffic-control .tc-action--authorize {\n  display: none;\n}\n\ntraffic-control .tc-close--button {\n  display: none;\n  margin: 0 auto;\n  padding: 16px;\n  width: 100%;\n  border: none;\n  outline: none;\n  background: none;\n  color: #eee;\n  font-size: 24px;\n  font-family: Arial, sans-serif;\n  cursor: pointer;\n  height: 100%;\n  position: relative;\n  transition: all .2s ease;\n  text-align: center;\n}\n\ntraffic-control.is-loading .tc-close--button {\n  border-color: #ccc;\n  color: #ccc;\n}\n\ntraffic-control .tc-close--button.is-entering {\n  animation: bounceFadeInRight .6s cubic-bezier(0.19, 1, 0.22, 1) both;\n  animation-delay: .3s;\n}\n\ntraffic-control .tc-bar.is-active {\n  display: table;\n}\n\ntraffic-control .tc-message--loading.is-active {\n  display: block;\n  opacity: 1;\n}\n\ntraffic-control .tc-message--synchronized.is-active {\n  display: block;\n}\n\ntraffic-control .tc-message--diverged.is-active {\n  display: block;\n}\n\ntraffic-control .tc-message--unauthorized.is-active {\n  display: block;\n}\n\ntraffic-control .tc-message--ahead.is-active {\n  display: block;\n}\n\ntraffic-control .tc-action--deploy.is-active {\n  display: block;\n}\n\ntraffic-control .tc-action--info.is-active {\n  display: block;\n}\n\ntraffic-control .tc-action--authorize.is-active {\n  display: block;\n}\n\ntraffic-control .tc-close--button.is-active {\n  display: block;\n}\n\n@keyframes bounceFadeInRight {\n  0% {\n    opacity: 0;\n    transform: translateX(100%);\n  }\n  50% {\n    opacity: 1;\n    transform: translateX(-25%);\n  }\n  100% {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n@keyframes bounceFadeInLeft {\n  0% {\n    opacity: 0;\n    transform: translateX(-100%);\n  }\n  50% {\n    opacity: 1;\n    transform: translateX(25%);\n  }\n  100% {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n@keyframes slideInDown {\n  0% {\n    transform: translateY(-100%)\n  }\n  100% {\n    transform: translateY(0)\n  }\n}\n",jt=function(){function t(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e.classCallCheck(this,t),this.opts=ht({},this._getDefaultOpts(),n),this._validateOpts(this.opts),this._init()}return e.createClass(t,[{key:"_getDefaultOpts",value:function(){return{stagingBranch:"develop",productionBrach:"master",ghAPI:"https://api.github.com",containerEl:document.body}}},{key:"_validateOpts",value:function(t){if(null==t.repo)throw new Error("You need to specify a repository.")}},{key:"_init",value:function(){var t=this;this._addCss(xt),this.el=document.createElement("traffic-control"),this.el.innerHTML=gt,this.els={bar:this.el.getElementsByClassName("tc-bar")[0],loadingMsg:this.el.getElementsByClassName("tc-message--loading")[0],syncedMsg:this.el.getElementsByClassName("tc-message--synchronized")[0],aheadMsg:this.el.getElementsByClassName("tc-message--ahead")[0],divergedMsg:this.el.getElementsByClassName("tc-message--diverged")[0],unauthedMsg:this.el.getElementsByClassName("tc-message--unauthorized")[0],deployBtn:this.el.getElementsByClassName("tc-action--deploy")[0],authBtn:this.el.getElementsByClassName("tc-action--authorize")[0],infoBtn:this.el.getElementsByClassName("tc-action--info")[0],closeBtn:this.el.getElementsByClassName("tc-close--button")[0]},this.opts.containerEl.appendChild(this.el),this.animateIn(this.els.bar,function(){t.el.classList.add("is-loading")}),this.animateIn(this.els.loadingMsg),this.animateIn(this.els.closeBtn)}},{key:"_addCss",value:function(t){var n=document.createElement("style"),e=document.head||document.getElementsByTagName("head")[0];n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),e.appendChild(n)}},{key:"animateIn",value:function(t,n){var e=arguments.length<=2||void 0===arguments[2]?0:arguments[2],o=!1,i=function a(){o=!0,t.removeEventListener(Et,a)};t.addEventListener(Et,i,!1),t.classList.add("is-active"),t.classList.add("is-entering"),n&&"function"==typeof n&&(o?!function(){var o=function i(){setTimeout(n,e),t.removeEventListener(wt,i)};t.addEventListener(wt,o,!1)}():setTimeout(n,e))}},{key:"animateOut",value:function(t,n){var e=arguments.length<=2||void 0===arguments[2]?0:arguments[2],o=!1,i=function a(){o=!0,t.removeEventListener(Et,a)};t.addEventListener(Et,i,!1),t.classList.remove("is-entering"),t.classList.add("is-leaving"),o?!function(){var o=function i(){t.classList.remove("is-leaving"),t.classList.remove("is-active"),n&&"function"==typeof n&&setTimeout(n,200+e),t.removeEventListener(wt,i)};t.addEventListener(wt,o,!1)}():(t.classList.remove("is-leaving"),t.classList.remove("is-active"),n&&"function"==typeof n&&setTimeout(n,e))}}]),t}(),wt=function(){var t=document.createElement("fakeelement"),n={animation:"animationend",OAnimation:"oanimationend",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd",MSAnimation:"MSAnimationEnd"};for(var e in n)if(null!=!t.style[e])return n[e]}(),Et=function(){var t=document.createElement("fakeelement"),n={animation:"animationstart",OAnimation:"oanimationstart",MozAnimation:"animationstart",WebkitAnimation:"webkitAnimationStart",MSAnimation:"MSAnimationStart"};for(var e in n)if(null!=!t.style[e])return n[e]}();return n});