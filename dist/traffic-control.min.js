!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("trafficControl",t):n.trafficControl=t()}(this,function(){"use strict";function n(n,t){return t={exports:{}},n(t,t.exports),t.exports}function t(n){var t=window.netlify,e=function(){return new wn(n)},o=function(){if(null==t){var n=document.createElement("script");return n.type="text/javascript",n.onload=n.onreadystatechange=e,n.src="https://app.netlify.com/authentication.js",document.body.appendChild(n)}return e()};window.addEventListener?window.addEventListener("load",o,!1):window.attachEvent&&window.attachEvent("onload",o)}var e={};e["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol?"symbol":typeof n},e.classCallCheck=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},e.createClass=function(){function n(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}}();var o=n(function(n){var t=n.exports={version:"2.4.0"};"number"==typeof __e&&(__e=t)}),i=o&&"object"==typeof o&&"default"in o?o["default"]:o,a=n(function(n){n.exports=function(n){try{return!!n()}catch(t){return!0}}}),r=a&&"object"==typeof a&&"default"in a?a["default"]:a,c=n(function(n){var t={}.toString;n.exports=function(n){return t.call(n).slice(8,-1)}}),s=c&&"object"==typeof c&&"default"in c?c["default"]:c,l=n(function(n){var t=s;n.exports=Object("z").propertyIsEnumerable(0)?Object:function(n){return"String"==t(n)?n.split(""):Object(n)}}),f=l&&"object"==typeof l&&"default"in l?l["default"]:l,u=n(function(n){n.exports=function(n){if(void 0==n)throw TypeError("Can't call method on  "+n);return n}}),d=u&&"object"==typeof u&&"default"in u?u["default"]:u,p=n(function(n){var t=d;n.exports=function(n){return Object(t(n))}}),y=p&&"object"==typeof p&&"default"in p?p["default"]:p,m=n(function(n,t){t.f={}.propertyIsEnumerable}),h=m&&"object"==typeof m&&"default"in m?m["default"]:m,b=n(function(n,t){t.f=Object.getOwnPropertySymbols}),v=b&&"object"==typeof b&&"default"in b?b["default"]:b,g=n(function(n){n.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")}),x=g&&"object"==typeof g&&"default"in g?g["default"]:g,j=n(function(n){var t=0,e=Math.random();n.exports=function(n){return"Symbol(".concat(void 0===n?"":n,")_",(++t+e).toString(36))}}),w=j&&"object"==typeof j&&"default"in j?j["default"]:j,E=n(function(n){var t=n.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),k=E&&"object"==typeof E&&"default"in E?E["default"]:E,O=n(function(n){var t=k,e="__core-js_shared__",o=t[e]||(t[e]={});n.exports=function(n){return o[n]||(o[n]={})}}),z=O&&"object"==typeof O&&"default"in O?O["default"]:O,S=n(function(n){var t=z("keys"),e=w;n.exports=function(n){return t[n]||(t[n]=e(n))}}),C=S&&"object"==typeof S&&"default"in S?S["default"]:S,L=n(function(n){var t=Math.ceil,e=Math.floor;n.exports=function(n){return isNaN(n=+n)?0:(n>0?e:t)(n)}}),_=L&&"object"==typeof L&&"default"in L?L["default"]:L,M=n(function(n){var t=_,e=Math.max,o=Math.min;n.exports=function(n,i){return n=t(n),0>n?e(n+i,0):o(n,i)}}),B=M&&"object"==typeof M&&"default"in M?M["default"]:M,A=n(function(n){var t=_,e=Math.min;n.exports=function(n){return n>0?e(t(n),9007199254740991):0}}),I=A&&"object"==typeof A&&"default"in A?A["default"]:A,T=n(function(n){var t=f,e=d;n.exports=function(n){return t(e(n))}}),N=T&&"object"==typeof T&&"default"in T?T["default"]:T,F=n(function(n){var t=N,e=I,o=B;n.exports=function(n){return function(i,a,r){var c,s=t(i),l=e(s.length),f=o(r,l);if(n&&a!=a){for(;l>f;)if(c=s[f++],c!=c)return!0}else for(;l>f;f++)if((n||f in s)&&s[f]===a)return n||f||0;return!n&&-1}}}),P=F&&"object"==typeof F&&"default"in F?F["default"]:F,X=n(function(n){var t={}.hasOwnProperty;n.exports=function(n,e){return t.call(n,e)}}),R=X&&"object"==typeof X&&"default"in X?X["default"]:X,D=n(function(n){var t=R,e=N,o=P(!1),i=C("IE_PROTO");n.exports=function(n,a){var r,c=e(n),s=0,l=[];for(r in c)r!=i&&t(c,r)&&l.push(r);for(;a.length>s;)t(c,r=a[s++])&&(~o(l,r)||l.push(r));return l}}),Y=D&&"object"==typeof D&&"default"in D?D["default"]:D,G=n(function(n){var t=Y,e=x;n.exports=Object.keys||function(n){return t(n,e)}}),W=G&&"object"==typeof G&&"default"in G?G["default"]:G,H=n(function(n){var t=W,e=v,o=h,i=y,a=f,c=Object.assign;n.exports=!c||r(function(){var n={},t={},e=Symbol(),o="abcdefghijklmnopqrst";return n[e]=7,o.split("").forEach(function(n){t[n]=n}),7!=c({},n)[e]||Object.keys(c({},t)).join("")!=o})?function(n,r){for(var c=i(n),s=arguments.length,l=1,f=e.f,u=o.f;s>l;)for(var d,p=a(arguments[l++]),y=f?t(p).concat(f(p)):t(p),m=y.length,h=0;m>h;)u.call(p,d=y[h++])&&(c[d]=p[d]);return c}:c}),q=H&&"object"==typeof H&&"default"in H?H["default"]:H,U=n(function(n){n.exports=!r(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})}),J=U&&"object"==typeof U&&"default"in U?U["default"]:U,K=n(function(n){n.exports=function(n,t){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:t}}}),Q=K&&"object"==typeof K&&"default"in K?K["default"]:K,V=n(function(n){n.exports=function(n){return"object"===("undefined"==typeof n?"undefined":e["typeof"](n))?null!==n:"function"==typeof n}}),Z=V&&"object"==typeof V&&"default"in V?V["default"]:V,$=n(function(n){var t=Z;n.exports=function(n,e){if(!t(n))return n;var o,i;if(e&&"function"==typeof(o=n.toString)&&!t(i=o.call(n)))return i;if("function"==typeof(o=n.valueOf)&&!t(i=o.call(n)))return i;if(!e&&"function"==typeof(o=n.toString)&&!t(i=o.call(n)))return i;throw TypeError("Can't convert object to primitive value")}}),nn=$&&"object"==typeof $&&"default"in $?$["default"]:$,tn=n(function(n){var t=Z,e=k.document,o=t(e)&&t(e.createElement);n.exports=function(n){return o?e.createElement(n):{}}}),en=tn&&"object"==typeof tn&&"default"in tn?tn["default"]:tn,on=n(function(n){n.exports=!J&&!r(function(){return 7!=Object.defineProperty(en("div"),"a",{get:function(){return 7}}).a})}),an=on&&"object"==typeof on&&"default"in on?on["default"]:on,rn=n(function(n){var t=Z;n.exports=function(n){if(!t(n))throw TypeError(n+" is not an object!");return n}}),cn=rn&&"object"==typeof rn&&"default"in rn?rn["default"]:rn,sn=n(function(n,t){var e=cn,o=an,i=nn,a=Object.defineProperty;t.f=J?Object.defineProperty:function(n,t,r){if(e(n),t=i(t,!0),e(r),o)try{return a(n,t,r)}catch(c){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(n[t]=r.value),n}}),ln=sn&&"object"==typeof sn&&"default"in sn?sn["default"]:sn,fn=n(function(n){var t=ln,e=Q;n.exports=J?function(n,o,i){return t.f(n,o,e(1,i))}:function(n,t,e){return n[t]=e,n}}),un=fn&&"object"==typeof fn&&"default"in fn?fn["default"]:fn,dn=n(function(n){n.exports=function(n){if("function"!=typeof n)throw TypeError(n+" is not a function!");return n}}),pn=dn&&"object"==typeof dn&&"default"in dn?dn["default"]:dn,yn=n(function(n){var t=pn;n.exports=function(n,e,o){if(t(n),void 0===e)return n;switch(o){case 1:return function(t){return n.call(e,t)};case 2:return function(t,o){return n.call(e,t,o)};case 3:return function(t,o,i){return n.call(e,t,o,i)}}return function(){return n.apply(e,arguments)}}}),mn=yn&&"object"==typeof yn&&"default"in yn?yn["default"]:yn,hn=n(function(n,t){var e=k,o=i,a=mn,r=un,c="prototype",s=function l(n,t,i){var s,f,u,d=n&l.F,p=n&l.G,y=n&l.S,m=n&l.P,h=n&l.B,b=n&l.W,v=p?o:o[t]||(o[t]={}),g=v[c],x=p?e:y?e[t]:(e[t]||{})[c];p&&(i=t);for(s in i)f=!d&&x&&void 0!==x[s],f&&s in v||(u=f?x[s]:i[s],v[s]=p&&"function"!=typeof x[s]?i[s]:h&&f?a(u,e):b&&x[s]==u?function(n){var t=function(t,e,o){if(this instanceof n){switch(arguments.length){case 0:return new n;case 1:return new n(t);case 2:return new n(t,e)}return new n(t,e,o)}return n.apply(this,arguments)};return t[c]=n[c],t}(u):m&&"function"==typeof u?a(Function.call,u):u,m&&((v.virtual||(v.virtual={}))[s]=u,n&l.R&&g&&!g[s]&&r(g,s,u)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,n.exports=s}),bn=hn&&"object"==typeof hn&&"default"in hn?hn["default"]:hn,vn=(n(function(n){var t=bn;t(t.S+t.F,"Object",{assign:q})}),n(function(n){n.exports=i.Object.assign})),gn=vn&&"object"==typeof vn&&"default"in vn?vn["default"]:vn,xn='<div class="tc-bar">\n  <div class="tc-message">\n    <div class="tc-container">\n      <div class="tc-message--text tc-message--loading">\n        Loading...\n      </div>\n      <div class="tc-message--text tc-message--synchronized">\n        You are viewing the staging site.\n        Everything is in sync, production is even with staging. ðŸ‘Œ\n      </div>\n      <div class="tc-message--text tc-message--ahead"></div>\n      <div class="tc-message--text tc-message--diverged"></div>\n      <div class="tc-message--text tc-message--unauthorized">\n        You are viewing the staging site,\n        but you cannot deploy or view changes\n        until you authorize read/write access\n        to your Github repository.\n      </div>\n    </div>\n  </div>\n  <div class="tc-action">\n    <div class="tc-container">\n      <button\n        class="tc-action--button tc-action--deploy"\n        aria-label="Perform a deployment to the production branch."\n      >Deploy</button>\n      <button\n        class="tc-action--button tc-action--authorize"\n        aria-label="Authorize traffic-control to access your Github account."\n      >Authorize</button>\n      <button\n        class="tc-action--button tc-action--info"\n        aria-label="Find out more information."\n      >How?</button>\n    </div>\n  </div>\n  <div class="tc-close">\n    <div class="tc-container">\n      <button\n        class="tc-close--button"\n        aria-label="Close traffic-control deployment user interface."\n      >&times;</button>\n    </div>\n  </div>\n</div>\n',jn="/*\n  Note: there is a lot of repetition going on in this CSS.\n  This is intentional, in order to keep specificity low\n  enough that custom styles are easier to implement.\n */\n\ntraffic-control,\ntraffic-control *,\ntraffic-control *:before,\ntraffic-control *:after {\n  box-sizing: border-box;\n}\n\ntraffic-control {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  z-index: 10000;\n}\n\ntraffic-control .tc-bar {\n  display: none;\n  width: 100%;\n  height: 100%;\n  table-layout: fixed;\n  font-family: sans-serif;\n  background: #fff;\n  color: #000;\n  transition: all .2s ease;\n}\n\ntraffic-control.is-loading .tc-bar {\n  background: #eee;\n  color: #aaa;\n}\n\ntraffic-control.is-unauthorized .tc-bar {\n  background: #E02D2D;\n  color: #fff;\n}\n\ntraffic-control .tc-bar.is-entering {\n  animation: slideInDown .6s ease both;\n}\n\ntraffic-control .tc-message {\n  display: table-cell;\n  vertical-align: middle;\n  height: 100%;\n}\n\ntraffic-control .tc-action {\n  display: table-cell;\n  vertical-align: middle;\n  height: 100%;\n  width: 100px;\n}\n\ntraffic-control .tc-close {\n  display: table-cell;\n  vertical-align: middle;\n  height: 100%;\n  width: 60px;\n  border-left: 1px solid #eee;\n  transition: all .2s ease;\n}\n\ntraffic-control.is-loading .tc-close {\n  border-color: #ccc;\n}\n\ntraffic-control.is-unauthorized .tc-close {\n  border-color: #ED5252;\n}\n\ntraffic-control .tc-message--text {\n  font-size: 14px;\n  position: relative;\n  padding: 16px;\n}\n\ntraffic-control .tc-message--loading {\n  display: none;\n  opacity: 0;\n}\n\ntraffic-control .tc-message--loading.is-entering {\n  animation: bounceFadeInLeft .6s cubic-bezier(0.19, 1, 0.22, 1) both;\n  animation-delay: .3s;\n}\n\ntraffic-control .tc-message--loading.is-leaving {\n  animation: bounceFadeOutRight .6s cubic-bezier(0.95, 0.05, 0.795, 0.035) both;\n}\n\ntraffic-control .tc-message--synchronized {\n  display: none;\n}\n\ntraffic-control .tc-message--diverged {\n  display: none;\n}\n\ntraffic-control .tc-message--unauthorized {\n  display: none;\n}\n\ntraffic-control .tc-message--unauthorized.is-entering {\n  animation: bounceFadeInLeft .6s cubic-bezier(0.19, 1, 0.22, 1) both;\n  animation-delay: .3s;\n}\n\ntraffic-control .tc-message--ahead {\n  display: none;\n}\n\ntraffic-control .tc-action--deploy {\n  display: none;\n}\n\ntraffic-control .tc-action--info {\n  display: none;\n}\n\ntraffic-control .tc-action--authorize {\n  display: none;\n}\n\ntraffic-control .tc-close--button {\n  display: none;\n  margin: 0 auto;\n  padding: 16px;\n  width: 100%;\n  border: none;\n  outline: none;\n  background: none;\n  color: #eee;\n  font-size: 24px;\n  font-family: Arial, sans-serif;\n  cursor: pointer;\n  height: 100%;\n  position: relative;\n  transition: all .2s ease;\n  text-align: center;\n}\n\ntraffic-control.is-loading .tc-close--button {\n  color: #ccc;\n}\n\ntraffic-control.is-unauthorized .tc-close--button {\n  color: #ED5252;\n}\n\ntraffic-control .tc-close--button.is-entering {\n  animation: bounceFadeInRight .6s cubic-bezier(0.19, 1, 0.22, 1) both;\n  animation-delay: .3s;\n}\n\ntraffic-control .tc-bar.is-active {\n  display: table;\n}\n\ntraffic-control .tc-message--loading.is-active {\n  display: block;\n  opacity: 1;\n}\n\ntraffic-control .tc-message--synchronized.is-active {\n  display: block;\n}\n\ntraffic-control .tc-message--diverged.is-active {\n  display: block;\n}\n\ntraffic-control .tc-message--unauthorized.is-active {\n  display: block;\n}\n\ntraffic-control .tc-message--ahead.is-active {\n  display: block;\n}\n\ntraffic-control .tc-action--deploy.is-active {\n  display: block;\n}\n\ntraffic-control .tc-action--info.is-active {\n  display: block;\n}\n\ntraffic-control .tc-action--authorize.is-active {\n  display: block;\n}\n\ntraffic-control .tc-close--button.is-active {\n  display: block;\n}\n\n@keyframes bounceFadeInRight {\n  0% {\n    opacity: 0;\n    transform: translateX(100%);\n  }\n  50% {\n    opacity: 1;\n    transform: translateX(-25%);\n  }\n  100% {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n@keyframes bounceFadeOutLeft {\n  0% {\n    opacity: 1;\n    transform: translateX(0);\n  }\n  50% {\n    opacity: 1;\n    transform: translateX(25%);\n  }\n  100% {\n    opacity: 0;\n    transform: translateX(-100%);\n  }\n}\n\n@keyframes bounceFadeInLeft {\n  0% {\n    opacity: 0;\n    transform: translateX(-100%);\n  }\n  50% {\n    opacity: 1;\n    transform: translateX(25%);\n  }\n  100% {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n@keyframes bounceFadeOutRight {\n  0% {\n    opacity: 1;\n    transform: translateX(0);\n  }\n  50% {\n    opacity: 1;\n    transform: translateX(-25%);\n  }\n  100% {\n    opacity: 0;\n    transform: translateX(100%);\n  }\n}\n\n@keyframes slideInDown {\n  0% {\n    transform: translateY(-100%)\n  }\n  100% {\n    transform: translateY(0)\n  }\n}\n",wn=function(){function n(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e.classCallCheck(this,n),this.opts=gn({},this._getDefaultOpts(),t),this._validateOpts(this.opts),this._init()}return e.createClass(n,[{key:"_getDefaultOpts",value:function(){return{stagingBranch:"develop",productionBrach:"master",ghAPI:"https://api.github.com",containerEl:document.body}}},{key:"_validateOpts",value:function(n){if(null==n.repo)throw new Error("You need to specify a repository.")}},{key:"_init",value:function(){var n=this;this._addCss(jn),this.el=document.createElement("traffic-control"),this.el.id="traffic-control",this.el.innerHTML=xn,this.els={bar:this.el.getElementsByClassName("tc-bar")[0],loadingMsg:this.el.getElementsByClassName("tc-message--loading")[0],syncedMsg:this.el.getElementsByClassName("tc-message--synchronized")[0],aheadMsg:this.el.getElementsByClassName("tc-message--ahead")[0],divergedMsg:this.el.getElementsByClassName("tc-message--diverged")[0],unauthedMsg:this.el.getElementsByClassName("tc-message--unauthorized")[0],deployBtn:this.el.getElementsByClassName("tc-action--deploy")[0],authBtn:this.el.getElementsByClassName("tc-action--authorize")[0],infoBtn:this.el.getElementsByClassName("tc-action--info")[0],closeBtn:this.el.getElementsByClassName("tc-close--button")[0]},this.opts.containerEl.appendChild(this.el),this.animateIn(this.els.bar,function(){n.el.classList.add("is-loading")}),this.animateIn(this.els.loadingMsg),this.animateIn(this.els.closeBtn),this._authenticateAndRenderState()}},{key:"_authenticateAndRenderState",value:function(){var n=this,t=window.localStorage,e=window.netlify;e.configure({site_id:"1a55b3f3-66f9-49dc-bb9b-a2363c6fad06"}),t.gh_token||(this.el.classList.remove("is-loading"),this.el.classList.add("is-unauthorized"),this.animateOut(this.els.loadingMsg),this.animateIn(this.els.unauthedMsg),this.animateIn(this.els.authBtn),this.els.authBtn.addEventListener("click",function(){e.authenticate({provider:"github",scope:"repo"},function(e,o){if(e){var i=e.err?e.err.message:e.message;throw new Error("Error authenticating: "+i)}t.gh_token=o.token,n._authenticateAndRenderState()})},!1))}},{key:"_addCss",value:function(n){var t=document.createElement("style"),e=document.head||document.getElementsByTagName("head")[0];t.type="text/css",t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n)),e.appendChild(t)}},{key:"animateIn",value:function(n,t){var e=arguments.length<=2||void 0===arguments[2]?0:arguments[2],o=!1,i=function a(){o=!0,n.removeEventListener(kn,a)};n.addEventListener(kn,i,!1),n.classList.add("is-active"),n.classList.add("is-entering"),t&&"function"==typeof t&&(o?!function(){var o=function i(){setTimeout(t,e),n.removeEventListener(En,i)};n.addEventListener(En,o,!1)}():setTimeout(t,e))}},{key:"animateOut",value:function(n,t){var e=arguments.length<=2||void 0===arguments[2]?0:arguments[2],o=!1,i=function a(){o=!0,n.removeEventListener(kn,a)};n.addEventListener(kn,i,!1),n.classList.remove("is-entering"),n.classList.add("is-leaving"),o?!function(){var o=function i(){n.classList.remove("is-leaving"),n.classList.remove("is-active"),t&&"function"==typeof t&&setTimeout(t,200+e),n.removeEventListener(En,i)};n.addEventListener(En,o,!1)}():(n.classList.remove("is-leaving"),n.classList.remove("is-active"),t&&"function"==typeof t&&setTimeout(t,e))}}]),n}(),En=function(){var n=document.createElement("fakeelement"),t={animation:"animationend",OAnimation:"oanimationend",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd",MSAnimation:"MSAnimationEnd"};for(var e in t)if(null!=!n.style[e])return t[e]}(),kn=function(){var n=document.createElement("fakeelement"),t={animation:"animationstart",OAnimation:"oanimationstart",MozAnimation:"animationstart",WebkitAnimation:"webkitAnimationStart",MSAnimation:"MSAnimationStart"};for(var e in t)if(null!=!n.style[e])return t[e]}();return t});